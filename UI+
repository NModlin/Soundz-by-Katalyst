<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soundz Studio by Katalyst</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* Fall Theme Overrides */
        body { background-color: #0f0a08; color: #fdfaf7; font-family: 'Inter', sans-serif; }
        .glass { background: rgba(30, 20, 15, 0.7); backdrop-filter: blur(10px); border: 1px solid rgba(255, 150, 50, 0.1); }
        .volume-slider { accent-color: #f97316; } /* Tailwind orange-500 */
        .tab-active { border-bottom: 2px solid #f97316; color: #f97316; }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-thumb { background: #452a1e; border-radius: 10px; }
        .animate-spin-slow { animation: spin 8s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .queue-item:hover .queue-actions { opacity: 1; }
        .studio-gradient { background: linear-gradient(135deg, #f97316 0%, #d97706 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .active-glow { bsox-shadow: 0 0 15px rgba(249, 115, 22, 0.2); }
    </style>
</head>
<body class="p-4 md:p-8">
    <div class="max-w-6xl mx-auto">
        <!-- Header -->
        <header class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4">
            <div>
                <h1 class="text-4xl font-black tracking-tighter italic studio-gradient">SOUNDZ STUDIO</h1>
                <p class="text-orange-200/40 text-sm font-mono tracking-widest uppercase">By Katalyst • Node 192.168.6.65</p>
            </div>
            <div class="flex gap-3 items-center">
                <button onclick="toggleUserModal()" id="user-display" class="glass px-4 py-2 rounded-xl border-orange-500/10 hover:bg-white/5 transition-all text-xs font-bold text-orange-400 flex items-center">
                    <i class="fas fa-user-circle mr-2"></i> <span id="current-username">Guest</span>
                </button>
                <button onclick="toggleSettings()" class="p-2 px-3 rounded-xl glass border-orange-500/10 hover:bg-white/5 transition-all text-orange-200/50">
                    <i class="fas fa-cog"></i>
                </button>
                <div class="px-4 py-2 rounded-xl bg-orange-500/10 text-orange-400 text-xs font-bold border border-orange-500/20 flex items-center">
                    <i class="fas fa-leaf mr-2 animate-pulse text-[8px]"></i> STUDIO ONLINE
                </div>
            </div>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            
            <!-- Left Panel: Media & Queue -->
            <div class="lg:col-span-7 space-y-6">
                <div class="glass rounded-3xl overflow-hidden shadow-2xl active-glow">
                    <!-- Media Tabs -->
                    <div class="flex border-b border-orange-500/10 bg-black/40">
                        <button onclick="switchTab('youtube')" id="tab-youtube" class="flex-1 py-4 text-sm font-bold tab-active transition-all hover:bg-white/5">
                            <i class="fab fa-youtube mr-2"></i> STUDIO SEARCH
                        </button>
                        <button onclick="switchTab('queue')" id="tab-queue" class="flex-1 py-4 text-sm font-bold text-orange-200/30 transition-all hover:bg-white/5">
                            <i class="fas fa-list-ol mr-2"></i> NEXT UP <span id="queue-count" class="ml-1 text-[10px] bg-orange-600 text-white px-1.5 py-0.5 rounded-full">0</span>
                        </button>
                        <button onclick="switchTab('library')" id="tab-library" class="flex-1 py-4 text-sm font-bold text-orange-200/30 transition-all hover:bg-white/5">
                            <i class="fas fa-folder-open mr-2"></i> ARCHIVE
                        </button>
                    </div>

                    <!-- YouTube Search Section -->
                    <div id="content-youtube" class="p-6 space-y-6">
                        <div class="relative">
                            <input type="text" id="yt-search-input" placeholder="Search YouTube Music..." class="w-full bg-orange-900/10 border border-orange-500/20 rounded-2xl py-4 px-6 focus:outline-none focus:ring-2 focus:ring-orange-500/30 transition-all placeholder:text-orange-900">
                            <button onclick="executeSearch()" class="absolute right-3 top-2 bottom-2 px-6 rounded-xl bg-orange-600 hover:bg-orange-500 text-white font-bold transition-all shadow-lg shadow-orange-900/20">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                        <div id="yt-results" class="space-y-3 max-h-[400px] overflow-y-auto pr-2">
                            <p class="text-xs text-orange-200/20 italic text-center py-8">Ready to stream to Soundz Studio...</p>
                        </div>
                    </div>

                    <!-- Queue Section -->
                    <div id="content-queue" class="hidden p-6 space-y-4">
                        <div class="flex justify-between items-center">
                            <h3 class="text-xs font-bold text-orange-200/40 uppercase tracking-widest">Studio Queue</h3>
                            <button onclick="clearQueue()" class="text-[10px] text-orange-400/50 hover:text-orange-400 hover:underline">Clear Session</button>
                        </div>
                        <div id="queue-list" class="space-y-2">
                            <p class="text-xs text-orange-200/20 italic text-center py-8">Queue is empty.</p>
                        </div>
                    </div>

                    <!-- Library Section -->
                    <div id="content-library" class="hidden p-6">
                        <div class="space-y-2 max-h-[300px] overflow-y-auto">
                            <p class="text-xs text-orange-200/20 italic text-center py-8">Accessing local media archive...</p>
                        </div>
                    </div>
                </div>

                <!-- Now Playing Global bar -->
                <div class="glass p-6 rounded-3xl border-l-4 border-orange-500 flex items-center gap-6 shadow-xl relative overflow-hidden">
                    <div class="w-20 h-20 bg-black/40 rounded-2xl flex items-center justify-center relative overflow-hidden border border-orange-500/10 shadow-inner">
                        <div class="absolute inset-0 bg-orange-500/5 animate-pulse"></div>
                        <i id="disc-icon" class="fas fa-compact-disc text-4xl text-orange-500/80 animate-spin-slow"></i>
                    </div>
                    <div class="flex-grow">
                        <div class="flex items-center gap-2 mb-1">
                            <p class="text-[10px] font-bold text-orange-400 uppercase tracking-widest">Now Broadcasting</p>
                            <span id="now-playing-user" class="text-[9px] bg-orange-500/10 text-orange-300 px-2 py-0.5 rounded-md font-bold border border-orange-500/10">Soundz Studio</span>
                        </div>
                        <h2 id="now-playing-title" class="text-xl font-bold truncate text-orange-50">Waiting for input...</h2>
                        <div class="w-full bg-orange-950/30 h-1.5 rounded-full mt-3 overflow-hidden">
                            <div id="play-progress" class="bg-orange-500 h-full w-0 transition-all duration-500 rounded-full"></div>
                        </div>
                    </div>
                    <div class="flex gap-6 text-2xl text-orange-200/50">
                        <button onclick="skipTrack()" class="hover:text-orange-400 transition-colors"><i class="fas fa-forward-step"></i></button>
                    </div>
                </div>
            </div>

            <!-- Right Panel: Zone & Master Control -->
            <div class="lg:col-span-5 space-y-6">
                <!-- Master Controls -->
                <section class="glass p-8 rounded-3xl shadow-xl border-t border-white/5">
                    <div class="flex justify-between items-center mb-8">
                        <h2 class="text-xl font-black italic tracking-tighter studio-gradient">STUDIO MASTER</h2>
                        <button id="master-mute" class="px-4 py-2 rounded-xl bg-orange-950/20 hover:bg-orange-600/20 hover:text-orange-400 transition-all text-xs font-bold border border-orange-500/10 text-orange-200/40">
                            MUTE ALL
                        </button>
                    </div>
                    <div class="space-y-6">
                        <div class="flex items-center gap-6">
                            <i class="fas fa-volume-low text-orange-900"></i>
                            <input type="range" class="flex-grow h-2 rounded-lg appearance-none cursor-pointer volume-slider bg-orange-950/30" value="70">
                            <i class="fas fa-volume-high text-orange-900"></i>
                        </div>
                    </div>
                </section>

                <!-- Zone List -->
                <section class="space-y-4" id="clients-container">
                    <h2 class="text-xs font-black text-orange-200/20 uppercase tracking-widest px-2">Studio Monitor Zones</h2>
                    <div class="glass p-5 rounded-2xl flex items-center gap-5 transition-all hover:bg-white/5 border border-orange-500/5">
                        <div class="w-12 h-12 rounded-2xl bg-orange-500/10 flex items-center justify-center text-orange-500 text-xl shadow-lg shadow-orange-900/10">
                            <i class="fas fa-tv"></i>
                        </div>
                        <div class="flex-grow">
                            <h3 class="font-bold text-orange-50/90">Living Room Monitor</h3>
                            <input type="range" class="w-full h-1.5 rounded-lg appearance-none cursor-pointer volume-slider bg-orange-950/30" value="85">
                        </div>
                    </div>
                    <div class="glass p-5 rounded-2xl flex items-center gap-5 transition-all hover:bg-white/5 border border-dashed border-orange-500/10 opacity-70">
                        <div class="w-12 h-12 rounded-2xl bg-orange-900/10 flex items-center justify-center text-orange-900 text-xl shadow-lg shadow-orange-900/5">
                            <i class="fas fa-bed"></i>
                        </div>
                        <div class="flex-grow">
                            <h3 class="font-bold text-orange-50/60">Bedroom Monitor</h3>
                            <input type="range" class="w-full h-1.5 rounded-lg appearance-none cursor-pointer volume-slider bg-orange-950/20" value="40">
                        </div>
                    </div>
                </section>
            </div>
        </div>

        <!-- User Identity Modal -->
        <div id="user-modal" class="hidden fixed inset-0 bg-black/90 backdrop-blur-md z-[60] flex items-center justify-center p-4">
            <div class="glass max-w-sm w-full rounded-3xl p-8 border border-orange-500/10 text-center">
                <div class="w-16 h-16 bg-orange-500/10 rounded-full flex items-center justify-center mx-auto mb-4 text-orange-500 text-2xl">
                    <i class="fas fa-headphones"></i>
                </div>
                <h2 class="text-xl font-bold mb-2 text-orange-50">Connect to Studio</h2>
                <p class="text-xs text-orange-200/40 mb-6">Enter your name to start queuing audio.</p>
                <input type="text" id="username-input" placeholder="e.g. Katalyst" class="w-full bg-orange-900/10 border border-orange-500/20 rounded-xl p-3 mb-4 focus:outline-none focus:border-orange-500 text-center text-orange-100">
                <button onclick="saveUser()" class="w-full py-4 bg-orange-600 hover:bg-orange-500 text-white rounded-2xl font-bold transition-transform active:scale-95 shadow-lg shadow-orange-900/20">START SESSION</button>
            </div>
        </div>

        <!-- Settings Modal -->
        <div id="settings-modal" class="hidden fixed inset-0 bg-black/90 backdrop-blur-md z-50 flex items-center justify-center p-4">
            <div class="glass max-w-md w-full rounded-3xl p-8 border border-orange-500/10">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-bold text-orange-50">Studio Engine Config</h2>
                    <button onclick="toggleSettings()" class="text-orange-200/20 hover:text-white"><i class="fas fa-times"></i></button>
                </div>
                <div class="space-y-4">
                    <div>
                        <label class="text-[10px] font-bold text-orange-200/40 uppercase">YouTube API Credential</label>
                        <input type="password" placeholder="AIzaSy..." class="w-full bg-orange-900/10 border border-orange-500/20 rounded-xl p-3 mt-1 focus:outline-none focus:border-orange-500 text-orange-100">
                    </div>
                    <button onclick="toggleSettings()" class="w-full py-4 bg-orange-600 rounded-2xl font-bold mt-4 shadow-lg shadow-orange-900/20 text-white">UPDATE ENGINE</button>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="mt-12 pt-8 border-t border-orange-500/5 flex flex-col md:flex-row justify-between items-center text-orange-200/10 text-[10px] gap-6 uppercase font-bold tracking-tighter">
            <div class="flex gap-8">
                <span><i class="fas fa-compact-disc mr-2"></i> SOUNDZ STUDIO SYSTEM ACTIVE</span>
                <span><i class="fas fa-users mr-2"></i> MULTI-USER SYNC ENABLED</span>
            </div>
            <div class="flex gap-6">
                <a href="http://192.168.6.65:1780" target="_blank" class="text-orange-500/40 hover:text-orange-500 transition-colors">SNAPWEB CONSOLE <i class="fas fa-external-link-alt ml-1"></i></a>
            </div>
        </footer>
    </div>

    <script>
        let currentUser = localStorage.getItem('soundz_user') || 'Guest';
        let queue = [];
        let nowPlaying = null;

        window.onload = () => {
            document.getElementById('current-username').textContent = currentUser;
            if (currentUser === 'Guest') toggleUserModal();
        };

        function toggleUserModal() { document.getElementById('user-modal').classList.toggle('hidden'); }
        function toggleSettings() { document.getElementById('settings-modal').classList.toggle('hidden'); }

        function saveUser() {
            const val = document.getElementById('username-input').value;
            if (val) {
                currentUser = val;
                localStorage.setItem('soundz_user', val);
                document.getElementById('current-username').textContent = val;
                toggleUserModal();
            }
        }

        function switchTab(tab) {
            ['youtube', 'queue', 'library'].forEach(t => {
                document.getElementById('content-' + t)?.classList.add('hidden');
                document.getElementById('tab-' + t)?.classList.remove('tab-active', 'text-orange-500');
                document.getElementById('tab-' + t)?.classList.add('text-orange-200/30');
            });
            document.getElementById('content-' + tab).classList.remove('hidden');
            document.getElementById('tab-' + tab).classList.add('tab-active', 'text-orange-500');
            document.getElementById('tab-' + tab).classList.remove('text-orange-200/30');
        }

        function executeSearch() {
            const query = document.getElementById('yt-search-input').value;
            if (!query) return;
            const resultsContainer = document.getElementById('yt-results');
            resultsContainer.innerHTML = `<div class="text-center py-8"><i class="fas fa-spinner animate-spin text-orange-500 mr-2"></i> Studio searching...</div>`;
            setTimeout(() => {
                const mockResults = [
                    { id: '1', title: 'Autumn Leaves - Jazz Mix', artist: 'Fall Vibes', duration: '1:02:10' },
                    { id: '2', title: 'Lofi Fall - Crisp Air Beats', artist: 'Autumn Chill', duration: 'LIVE' },
                    { id: '3', title: 'Harvest Moon Acoustic', artist: 'Katalyst', duration: '08:45' }
                ];
                resultsContainer.innerHTML = mockResults.map(track => `
                    <div class="p-4 glass border-orange-500/5 rounded-2xl flex items-center gap-4 group hover:bg-orange-500/10 transition-all">
                        <div class="w-12 h-12 bg-orange-950/20 rounded-lg flex items-center justify-center text-orange-900">
                            <i class="fas fa-music"></i>
                        </div>
                        <div class="flex-grow min-w-0">
                            <h4 class="text-sm font-bold truncate text-orange-50/90">${track.title}</h4>
                            <p class="text-[10px] text-orange-200/30">${track.artist} • ${track.duration}</p>
                        </div>
                        <button onclick="addToQueue('${track.title.replace(/'/g, "\\'")}')" class="px-4 py-2 bg-orange-600 hover:bg-orange-500 text-white rounded-xl text-[10px] font-bold transition-transform active:scale-95">
                            + QUEUE
                        </button>
                    </div>
                `).join('');
            }, 800);
        }

        function addToQueue(title) {
            const track = { title, user: currentUser, id: Date.now() };
            queue.push(track);
            updateQueueUI();
            if (!nowPlaying) playNext();
            else {
                document.getElementById('tab-queue').classList.add('animate-bounce');
                setTimeout(() => document.getElementById('tab-queue').classList.remove('animate-bounce'), 1000);
            }
        }

        function updateQueueUI() {
            document.getElementById('queue-count').textContent = queue.length;
            const list = document.getElementById('queue-list');
            if (queue.length === 0) {
                list.innerHTML = `<p class="text-xs text-orange-200/10 italic text-center py-8">Studio Queue is empty.</p>`;
                return;
            }
            list.innerHTML = queue.map((track, index) => `
                <div class="p-3 bg-orange-950/10 rounded-xl flex items-center gap-4 group queue-item">
                    <span class="text-xs font-mono text-orange-900">${index + 1}</span>
                    <div class="flex-grow min-w-0">
                        <h5 class="text-sm font-bold truncate text-orange-50/80">${track.title}</h5>
                        <p class="text-[9px] text-orange-500 font-bold uppercase tracking-tighter">Selected by ${track.user}</p>
                    </div>
                    <div class="queue-actions opacity-0 transition-opacity">
                        <button onclick="removeFromQueue(${track.id})" class="text-orange-900 text-xs hover:text-orange-500">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function playNext() {
            if (queue.length === 0) {
                nowPlaying = null;
                document.getElementById('now-playing-title').textContent = "Waiting for input...";
                document.getElementById('now-playing-user').textContent = "Soundz Studio";
                document.getElementById('play-progress').style.width = '0%';
                return;
            }
            nowPlaying = queue.shift();
            document.getElementById('now-playing-title').textContent = nowPlaying.title;
            document.getElementById('now-playing-user').textContent = nowPlaying.user;
            document.getElementById('play-progress').style.width = '15%';
            updateQueueUI();
        }

        function skipTrack() { playNext(); }
        function removeFromQueue(id) { queue = queue.filter(t => t.id !== id); updateQueueUI(); }
        function clearQueue() { queue = []; updateQueueUI(); }
    </script>
</body>
</html>